# 03. å°ç¨‹åºé…ç½®æ–‡ä»¶



## 3.1 é…ç½®æ–‡ä»¶ä»‹ç»

 

JSON æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®æ ¼å¼ï¼Œå¹¶ä¸æ˜¯ç¼–ç¨‹è¯­è¨€ï¼Œåœ¨å°ç¨‹åºä¸­ï¼ŒJSONæ‰®æ¼”çš„é™æ€é…ç½®çš„è§’è‰²ã€‚

å°ç¨‹åºä¸­å¸¸è§çš„é…ç½®æ–‡ä»¶æœ‰ä»¥ä¸‹å‡ ç§ï¼š



1. å…¨å±€é…ç½®æ–‡ä»¶ï¼š`app.json`
2. å±€éƒ¨é…ç½®æ–‡ä»¶ï¼š`é¡µé¢.json`
3. å·¥å…·é…ç½®æ–‡ä»¶ï¼š`project.config.json` å’Œ `project.private.config.json`
4. æœç´¢é…ç½®æ–‡ä»¶ï¼š`sitemap.json`



æˆ‘ä»¬ä¾æ¬¡æ¥è¯´æ˜ä¸€ä¸‹å®ƒä»¬çš„ç”¨é€”



## 3.2 å…¨å±€é…ç½®



`app.json` æ˜¯å½“å‰å°ç¨‹åºçš„å…¨å±€é…ç½®ï¼ŒåŒ…æ‹¬äº†å°ç¨‹åºçš„æ‰€æœ‰é¡µé¢è·¯å¾„ã€ç•Œé¢è¡¨ç°ã€ç½‘ç»œè¶…æ—¶æ—¶é—´ã€åº•éƒ¨ tab ç­‰



### 3.2.1 pages



`pages` å­—æ®µï¼šç”¨äºæè¿°å½“å‰å°ç¨‹åºæ‰€æœ‰é¡µé¢è·¯å¾„ï¼Œç”¨äºä¸ºäº†è®©å°ç¨‹åºçŸ¥é“ç”±å“ªäº›é¡µé¢ç»„æˆä»¥åŠé¡µé¢å®šä¹‰åœ¨å“ªä¸ªç›®å½•ï¼Œæ¯ä¸€é¡¹éƒ½å¯¹åº”ä¸€ä¸ªé¡µé¢çš„ è·¯å¾„ï¼ˆå«æ–‡ä»¶åï¼‰ ä¿¡æ¯ã€‚

```json
{
  "pages": [
    "pages/index/index",
    "pages/logs/logs",
    "pages/list/list"
  ]
}
```



åœ¨é…ç½® pages å­—æ®µæ—¶ï¼Œæœ‰ä»¥ä¸‹æ³¨æ„äº‹é¡¹ï¼š

1. æœªæŒ‡å®š `entryPagePath` æ—¶ï¼Œæ•°ç»„çš„ç¬¬ä¸€é¡¹ä»£è¡¨å°ç¨‹åºçš„åˆå§‹é¡µé¢ï¼ˆé¦–é¡µï¼‰
2.   æ–‡ä»¶åä¸éœ€è¦å†™æ–‡ä»¶åç¼€æ¡†æ¶ä¼šè‡ªåŠ¨å»å¯»æ‰¾å¯¹åº”ä½ç½®çš„ `.json`, `.js`, `.wxml`, `.wxss` å››ä¸ªæ–‡ä»¶è¿›è¡Œå¤„ç†
3. **å°ç¨‹åºä¸­æ–°å¢/å‡å°‘é¡µé¢ï¼Œéƒ½éœ€è¦å¯¹ pages æ•°ç»„è¿›è¡Œä¿®æ”¹ã€‚**



> ğŸ“Œ **å¼€å‘å°æŠ€å·§**ï¼š
>
> â€‹    å¯ä»¥é€šè¿‡é…ç½®å°ç¨‹åºçš„é¡µé¢è·¯å¾„å¿«é€Ÿç”Ÿæˆå°ç¨‹åºçš„é¡µé¢



è¯¦ç»†æ–‡æ¡£: [pages é…ç½®é¡¹](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#pages)





### 3.2.2 window



`window`å­—æ®µï¼š å®šä¹‰å°ç¨‹åºæ‰€æœ‰é¡µé¢çš„é¡¶éƒ¨èƒŒæ™¯é¢œè‰²ï¼Œæ–‡å­—é¢œè‰²å®šä¹‰ç­‰



|             å±æ€§             |                     æè¿°                      |   ç±»å‹   |  é»˜è®¤å€¼  |
| :--------------------------: | :-------------------------------------------: | :------: | :------: |
| navigationBarBackgroundColor |                å¯¼èˆªæ èƒŒæ™¯é¢œè‰²                 | HexColor | \#000000 |
|    navigationBarTextStyle    |   å¯¼èˆªæ æ ‡é¢˜é¢œè‰²ï¼Œä»…æ”¯æŒ `black` / `white`    |  string  |  white   |
|    navigationBarTitleText    |              å¯¼èˆªæ æ ‡é¢˜æ–‡å­—å†…å®¹               |  string  |          |
|       backgroundColor        | ä¸‹æ‹‰ loading çš„æ ·å¼ï¼Œä»…æ”¯æŒ `dark` / `light`  |  string  |   dark   |
|    enablePullDownRefresh     |            æ˜¯å¦å¼€å¯å…¨å±€çš„ä¸‹æ‹‰åˆ·æ–°             | boolean  |  false   |
|    onReachBottomDistance     | é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶è§¦å‘æ—¶è·é¡µé¢åº•éƒ¨è·ç¦»å•ä½ä¸º px |  number  |    50    |



```json
{
  "window": {
    "backgroundTextStyle": "light",
    "backgroundColor": "#eee",
    "navigationBarBackgroundColor": "#9C0211",
    "navigationBarTitleText": "æ…•å°šèŠ±åŠ",
    "navigationBarTextStyle": "white",
    "enablePullDownRefresh": true
  }
}
```







### 3.2.3 tabBar



`tabBar` å­—æ®µï¼šå®šä¹‰å°ç¨‹åºé¡¶éƒ¨ã€åº•éƒ¨ `tab` æ ï¼Œå¦‚æœå°ç¨‹åºæ˜¯ä¸€ä¸ªå¤š tab åº”ç”¨ï¼Œä¾‹å¦‚ï¼šå¯ä»¥åœ¨å®¢æˆ·ç«¯çª—å£çš„åº•éƒ¨æˆ–é¡¶éƒ¨é€šè¿‡ tab æ å¯ä»¥åˆ‡æ¢é¡µé¢ï¼Œå¯ä»¥é€šè¿‡ tabBar é…ç½®é¡¹æŒ‡å®š tab æ çš„è¡¨ç°ï¼Œä»¥åŠ tab åˆ‡æ¢æ—¶æ˜¾ç¤ºçš„å¯¹åº”é¡µé¢ã€‚



**`tabBar` é…ç½®é¡¹**

|      å±æ€§       |                            æè¿°                            |   ç±»å‹   | é»˜è®¤å€¼ |
| :-------------: | :--------------------------------------------------------: | :------: | :----: |
|      color      |          tab ä¸Šçš„æ–‡å­—é»˜è®¤é¢œè‰²ï¼Œä»…æ”¯æŒåå…­è¿›åˆ¶é¢œè‰²          | HexColor |        |
|  selectedColor  |        tab ä¸Šçš„æ–‡å­—é€‰ä¸­æ—¶çš„é¢œè‰²ï¼Œä»…æ”¯æŒåå…­è¿›åˆ¶é¢œè‰²        | HexColor |        |
| backgroundColor |              tab çš„èƒŒæ™¯è‰²ï¼Œä»…æ”¯æŒåå…­è¿›åˆ¶é¢œè‰²              | HexColor |        |
|   borderStyle   |       tabbar ä¸Šè¾¹æ¡†çš„é¢œè‰²ï¼Œ ä»…æ”¯æŒ `black` / `white`       |  string  | black  |
|      list       | tab çš„åˆ—è¡¨ï¼Œè¯¦è§ `list` å±æ€§è¯´æ˜ï¼Œæœ€å°‘ 2 ä¸ªã€æœ€å¤š 5 ä¸ª tab |          |        |
|    position     |           tabBar çš„ä½ç½®ï¼Œä»…æ”¯æŒ `bottom` / `top`           |  string  | bottom |



**List  é…ç½®é¡¹**ï¼šlist æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œ**åªèƒ½é…ç½®æœ€å°‘ 2 ä¸ªã€æœ€å¤š 5 ä¸ª tab**ï¼Œtab æŒ‰æ•°ç»„çš„é¡ºåºæ’åºï¼Œæ¯ä¸ªé¡¹éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡

|       å±æ€§       |                             æè¿°                             |  ç±»å‹  | æ˜¯å¦å¿…å¡« |
| :--------------: | :----------------------------------------------------------: | :----: | :------: |
|     pagePath     |               é¡µé¢è·¯å¾„ï¼Œå¿…é¡»åœ¨ pages ä¸­å…ˆå®šä¹‰                | string |    æ˜¯    |
|       text       |                        tab ä¸ŠæŒ‰é’®æ–‡å­—                        | string |    æ˜¯    |
|     iconPath     | å›¾ç‰‡è·¯å¾„ï¼Œicon å¤§å°é™åˆ¶ä¸º 40kbï¼Œå»ºè®®å°ºå¯¸ä¸º 81px * 81pxï¼Œ<br />ä¸æ”¯æŒç½‘ç»œå›¾ç‰‡ã€‚ | string |    æ˜¯    |
| selectedIconPath | é€‰ä¸­æ—¶çš„å›¾ç‰‡è·¯å¾„ï¼Œicon å¤§å°é™åˆ¶ä¸º 40kbï¼Œå»ºè®®å°ºå¯¸ä¸º 81px * 81pxï¼Œä¸æ”¯æŒç½‘ç»œå›¾ç‰‡ã€‚ | string |    æ˜¯    |

> æ³¨æ„ï¼š**å½“ `position` ä¸º `top` æ—¶ï¼Œä¸æ˜¾ç¤º iconã€‚**



```json
{
  "tabBar": {
    "color": "#252933",
    "selectedColor": "#FF734C",
    "backgroundColor": "#ffffff",
    "borderStyle": "black",
    "list": [
      {
        "text": "é¦–é¡µ",
        "iconPath": "/assets/tabbar/home.png",
        "selectedIconPath": "/assets/tabbar/home-active.png",
        "pagePath": "pages/home/home"
      },
      {
        "text": "åˆ—è¡¨",
        "iconPath": "/assets/tabbar/list.png",
        "selectedIconPath": "/assets/tabbar/list-active.png",
        "pagePath": "pages/list/list"
      },
      {
        "text": "è´­ç‰©è½¦",
        "iconPath": "/assets/tabbar/cart.png",
        "selectedIconPath": "/assets/tabbar/cart-active.png",
        "pagePath": "pages/cart/cart"
      },
      {
        "text": "æˆ‘çš„",
        "iconPath": "/assets/tabbar/my.png",
        "selectedIconPath": "/assets/tabbar/my-active.png",
        "pagePath": "pages/my/my"
      }
    ]
  }
}
```









## 3.3 é¡µé¢é…ç½®



æ¯ä¸€ä¸ªå°ç¨‹åºé¡µé¢ä¹Ÿå¯ä»¥ä½¿ç”¨åŒå `.json` æ–‡ä»¶æ¥å¯¹æœ¬é¡µé¢çš„çª—å£è¡¨ç°è¿›è¡Œé…ç½®ï¼Œé¡µé¢ä¸­é…ç½®é¡¹ä¼šè¦†ç›– `app.json` çš„ `window` ä¸­ç›¸åŒçš„é…ç½®é¡¹ï¼Œé¡µé¢ä¸­é…ç½®é¡¹åœ¨å½“å‰é¡µé¢ä¼šè¦†ç›– `app.json` ä¸­ç›¸åŒçš„é…ç½®é¡¹ã€‚



`window`å­—æ®µï¼š å®šä¹‰å°ç¨‹åºæ‰€æœ‰é¡µé¢çš„é¡¶éƒ¨èƒŒæ™¯é¢œè‰²ï¼Œæ–‡å­—é¢œè‰²å®šä¹‰ç­‰



|             å±æ€§             |                     æè¿°                      |   ç±»å‹   |  é»˜è®¤å€¼  |
| :--------------------------: | :-------------------------------------------: | :------: | :------: |
| navigationBarBackgroundColor |                å¯¼èˆªæ èƒŒæ™¯é¢œè‰²                 | HexColor | \#000000 |
|    navigationBarTextStyle    |   å¯¼èˆªæ æ ‡é¢˜é¢œè‰²ï¼Œä»…æ”¯æŒ `black` / `white`    |  string  |  white   |
|    navigationBarTitleText    |              å¯¼èˆªæ æ ‡é¢˜æ–‡å­—å†…å®¹               |  string  |          |
|       backgroundColor        | ä¸‹æ‹‰ loading çš„æ ·å¼ï¼Œä»…æ”¯æŒ `dark` / `light`  |  string  |   dark   |
|    enablePullDownRefresh     |            æ˜¯å¦å¼€å¯å…¨å±€çš„ä¸‹æ‹‰åˆ·æ–°             | boolean  |  false   |
|    onReachBottomDistance     | é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶è§¦å‘æ—¶è·é¡µé¢åº•éƒ¨è·ç¦»å•ä½ä¸º px |  number  |    50    |



> ğŸ“Œ **æ³¨æ„äº‹é¡¹**ï¼š
>
> â€‹       é¡µé¢é…ç½®é¡¹å’Œ `app.json` ä¸­çš„ `window` å±æ€§å‡ ä¹ä¸€è‡´ï¼Œä½†è¿™é‡Œä¸éœ€è¦é¢å¤–æŒ‡å®š `window` å­—æ®µ



```json
{
  "backgroundTextStyle": "light",
  "backgroundColor": "#eee",
  "navigationBarBackgroundColor": "#9C0211",
  "navigationBarTitleText": "å•†å“åˆ—è¡¨",
  "navigationBarTextStyle": "white",
  "enablePullDownRefresh": true
}
```







## 3.4 é¡¹ç›®é…ç½®æ–‡ä»¶



é€šå¸¸å¤§å®¶åœ¨ä½¿ç”¨ä¸€ä¸ªå·¥å…·çš„æ—¶å€™ï¼Œéƒ½ä¼šé’ˆå¯¹å„è‡ªå–œå¥½åšä¸€äº›ä¸ªæ€§åŒ–é…ç½®ï¼Œä¾‹å¦‚  ç¼–è¯‘é…ç½®ç­‰ç­‰ï¼Œå½“ä½ æ¢äº†å¦å¤–ä¸€å°ç”µè„‘é‡æ–°å®‰è£…å·¥å…·çš„æ—¶å€™ï¼Œä½ è¿˜è¦é‡æ–°é…ç½®ã€‚



è€ƒè™‘åˆ°è¿™ç‚¹ï¼Œå°ç¨‹åºå¼€å‘è€…å·¥å…·åœ¨æ¯ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•éƒ½ä¼šç”Ÿæˆä¸€ä¸ª `project.config.json`ï¼Œä½ åœ¨å·¥å…·ä¸Šåšçš„ä»»ä½•é…ç½®éƒ½ä¼šå†™å…¥åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œå½“ä½ é‡æ–°å®‰è£…å·¥å…·æˆ–è€…æ¢ç”µè„‘å·¥ä½œæ—¶ï¼Œä½ åªè¦è½½å…¥åŒä¸€ä¸ªé¡¹ç›®çš„ä»£ç åŒ…ï¼Œå¼€å‘è€…å·¥å…·å°±è‡ªåŠ¨ä¼šå¸®ä½ æ¢å¤åˆ°å½“æ—¶ä½ å¼€å‘é¡¹ç›®æ—¶çš„ä¸ªæ€§åŒ–é…ç½®ï¼Œå…¶ä¸­ä¼šåŒ…æ‹¬ç¼–è¾‘å™¨çš„é¢œè‰²ã€ä»£ç ä¸Šä¼ æ—¶è‡ªåŠ¨å‹ç¼©ç­‰ç­‰ä¸€ç³»åˆ—é€‰é¡¹



`project.private.config.json` æ–‡ä»¶åŒæ ·å¯ä»¥å¯¹é¡¹ç›®è¿›è¡Œé…ç½®ï¼Œ  `project.private.config.json`ä¸­çš„ç›¸åŒè®¾ç½®ä¼˜å…ˆçº§é«˜äº`project.config.json`ï¼Œ



> ğŸ“Œ **æ³¨æ„äº‹é¡¹**ï¼š
>
> 1. åœ¨ `project.config.json` æ–‡ä»¶ä¸­é…ç½®å…¬å…±çš„ç½®ï¼Œ `project.private.config.json` é…ç½®ä¸ªäººé…ç½®
> 2. å¼€å‘é˜¶æ®µç›¸å…³çš„è®¾ç½®ä¿®æ”¹å‘è€…å·¥å…·å†…çš„è®¾ç½®ä¿®æ”¹ä¼šä¼˜å…ˆè¦†ç›– `project.private.config.json` çš„å†…å®¹
> 3. å›  `project.private.config.json` æ˜¯é…ç½®ä¸ªäººé…ç½®ï¼Œå¯ä»¥å†™åˆ° `.gitignore` é¿å…ç‰ˆæœ¬ç®¡ç†çš„å†²çª



è¯¦ç»†é…ç½®æ–‡æ¡£ï¼š[é¡¹ç›®é…ç½®æ–‡ä»¶](https://developers.weixin.qq.com/miniprogram/dev/devtools/projectconfig.html)







## 3.5 sitemap.json



å¾®ä¿¡ç°å·²å¼€æ”¾å°ç¨‹åºå†…æœç´¢ï¼Œå½“å¼€å‘è€…å…è®¸å¾®ä¿¡ç´¢å¼•æ—¶ï¼Œå¾®ä¿¡ä¼šé€šè¿‡çˆ¬è™«çš„å½¢å¼ï¼Œä¸ºå°ç¨‹åºçš„é¡µé¢å†…å®¹å»ºç«‹ç´¢å¼•ã€‚å½“ç”¨æˆ·çš„æœç´¢è¯æ¡è§¦å‘è¯¥ç´¢å¼•æ—¶ï¼Œå°ç¨‹åºçš„é¡µé¢å°†å¯èƒ½å±•ç¤ºåœ¨æœç´¢ç»“æœä¸­ã€‚

å¯ä»¥é€šè¿‡ `sitemap.json` é…ç½®ï¼Œæˆ–è€…ç®¡ç†åå°é¡µé¢æ”¶å½•å¼€å…³æ¥é…ç½®å…¶å°ç¨‹åºé¡µé¢æ˜¯å¦å…è®¸å¾®ä¿¡ç´¢å¼•ã€‚è¯­æ³•å¦‚ä¸‹ï¼š

```json
{
  "rules": [
    {
      "action": "allow",
      "page": "*"
    }
  ]
}
```



å¸¸ç”¨é…ç½®é¡¹ï¼š

|  å±æ€§  |        å±æ€§è¯´æ˜         |           å±æ€§å€¼           |
| :----: | :---------------------: | :------------------------: |
| action |     æ˜¯å¦å…è®¸è¢«æœç´¢      | å¯é€‰é¡¹æœ‰ï¼šallow ã€disallow |
|  page  | å…è®¸/ä¸å…è®¸è¢«æœç´¢çš„é¡µé¢ |     é¡µé¢è·¯å¾„æˆ–è€…é€šé…ç¬¦     |



```json
// æ‰€æœ‰é¡µé¢éƒ½ä¼šè¢«å¾®ä¿¡ç´¢å¼•ï¼ˆé»˜è®¤æƒ…å†µï¼‰
{
  "rules": [
    {
      "action": "allow",
      "page": "*"
    }
  ]
}
```

```json
// é…ç½® path/to/page é¡µé¢ä¸è¢«ç´¢å¼•ï¼Œå…¶ä½™é¡µé¢å…è®¸è¢«ç´¢å¼•
{
  "rules":[
    {
      "action": "disallow",
      "page": "path/to/page"
    }
  ]
}
```



> ğŸ“Œ **æ³¨æ„äº‹é¡¹**ï¼š
>
> 1. æ²¡æœ‰ sitemap.json åˆ™é»˜è®¤æ‰€æœ‰é¡µé¢éƒ½èƒ½è¢«ç´¢å¼•
> 2. sitemap.json æ–‡ä»¶ä¸­é»˜è®¤çš„è®¾ç½®ï¼Œæ˜¯ä¼˜å…ˆçº§æœ€ä½çš„é»˜è®¤è§„åˆ™ï¼Œæ‰€æœ‰é¡µé¢éƒ½ä¼šè¢«å¾®ä¿¡ç´¢å¼•

